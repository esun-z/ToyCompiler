# ”语法树还原成为源文件的函数“模块

### 基本信息

> 最近更新日期：2024年12月10日

- **功能1：将`AST`还原为源代码**
- 思路：
  - 在`node.h`中，为结点添加虚函数`print`
  - 在`node.cpp`中实现虚函数，按其值和嵌套深度打印
  - 在`makefile`中，添加对node.cpp的编译
  - 在`main.cpp`中，从根节点递归打印AST
- **功能2：将`AST`的树状结构可视化出来**
- 思路：
  - 在`node.h`中，为结点添加虚函数`generateDot`
  - 在`node.cpp`中实现虚函数，将`AST`节点和具体的源代码节点的节点声明和关系声明语句写入`.dot`文件中
  - 在`main.cpp`中，从根节点递归调用`generateDot`函数，生成完整的`.dot`文件
  - 在终端使用`dot -Tpng ast.dot -o ast.png`命令将树结构可视化出来



### 与其他部分的交互

- 如果实现了新的AST结点，需要告诉我，我要实现对应的`print`函数和`generateDot`函数。

  > 另外：一个没有实现`print`函数的结点在打印过程中会被“$”替代；没有实现`generateDot`函数的节点不会被可视化。

### 备注

对于案例18的"还原为源代码"的功能有一个无法修复的小瑕疵，出现在无条件的`block`中，如下：

```
int main() {
  int a = 7;
{
    const float a = 3.3;
    my_sum(a, a);
  }
  my_sum(a, b);
  return b;
}
```

其中第三行的`{`缩进有问题，因为我的代码中的`{`默认是跟在一段语句后面的（类似于第一行的`{`）。所以无法处理无条件`block`。

